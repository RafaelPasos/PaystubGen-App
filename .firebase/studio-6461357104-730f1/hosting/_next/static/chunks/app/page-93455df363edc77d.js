(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{25684:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>eg});var s=a(95155),r=a(12115),n=a(35317),o=a(96454),i=a(34548),l=a(5227),d=a(7860),c=a(3310),m=a(40610),u=a(52955);let f=(0,r.createContext)(void 0),p=[{name:"Corazones"},{name:"Hojas"}],x={Corazones:[{name:"Chico",payRate:10},{name:"Mediano",payRate:12},{name:"Grande",payRate:14},{name:"Mini",payRate:10}],Hojas:[{name:"Blanca",payRate:13},{name:"Capote",payRate:8},{name:"Tira",payRate:6}]},h=(e,t)=>{let a=new m.$({operation:"list",path:t});c.d.emit("permission-error",a)},g=e=>{let{children:t}=e,a=(0,o.jt)(),[g,y]=(0,r.useState)([]),[b,v]=(0,r.useState)([]),[w,j]=(0,r.useState)([]),[N,I]=(0,r.useState)([]),[C,k]=(0,r.useState)(!0),[E,D]=(0,r.useState)({}),[R,S]=(0,r.useState)({}),[P,z]=(0,r.useState)(!1),_=(0,r.useCallback)(()=>{let e={};for(let t in R)e[t]={...R[t],quantity:0};S(e),z(!0)},[R]),A=async()=>{if(!a)return;let e=(0,n.wP)(a);Object.entries(E).forEach(t=>{let[s,r]=t,o=w.find(e=>e.id===s);if(o&&o.payRate!==r){let t=(0,n.H9)(a,"teams/".concat(o.teamId,"/productionItems"),s);e.update(t,{payRate:r})}}),Object.values(R).forEach(t=>{let s=N.find(e=>e.id===t.id),r=b.find(e=>e.id===t.employeeId);if(r){if(s){if(s.quantity!==t.quantity){let s=(0,n.H9)(a,"teams/".concat(r.teamId,"/employees/").concat(t.employeeId,"/dailyProduction"),t.id);e.update(s,{quantity:t.quantity})}}else if(t.quantity>0){let{id:s,...o}=t,i=(0,n.H9)((0,n.rJ)(a,"teams/".concat(r.teamId,"/employees/").concat(t.employeeId,"/dailyProduction")));e.set(i,o)}}});try{await e.commit(),z(!1)}catch(e){throw c.d.emit("permission-error",new m.$({operation:"write",path:"batch update",requestResourceData:"Batch update of rates and production"})),e}};(0,r.useEffect)(()=>{let e={};w.forEach(t=>{e[t.id]=t.payRate}),D(e);let t={};N.forEach(e=>{t[e.id]={...e}});let a=(0,i.k)(new Date,{weekStartsOn:1}),s=(0,d.k)({start:a,end:new Date(a.getTime()+432e6)});b.forEach(e=>{w.filter(t=>t.teamId===e.teamId).forEach(a=>{s.forEach(s=>{let r=(0,l.x)(s,{representation:"date"});if(!Object.values(t).some(t=>t.employeeId===e.id&&t.productionItemId===a.id&&t.date===r)){let s="placeholder-".concat(e.id,"-").concat(a.id,"-").concat(r);t[s]={id:s,employeeId:e.id,productionItemId:a.id,date:r,quantity:0}}})})}),S(t),z(!1)},[w,N,b]);let O=(0,r.useCallback)(async(e,t,s)=>{if(!a||0===s.length)return;let r=(0,n.wP)(a),o=(0,i.k)(new Date,{weekStartsOn:1}),u=new Date(o);u.setDate(u.getDate()+5);let f=(0,d.k)({start:o,end:u}),p=[];for(let o of s)for(let s of f){let i=(0,l.x)(s,{representation:"date"}),d={employeeId:e,productionItemId:o.id,date:i,quantity:0},c=(0,n.H9)((0,n.rJ)(a,"teams/".concat(t,"/employees/").concat(e,"/dailyProduction")));r.set(c,d),p.push({...d,id:c.id})}try{await r.commit()}catch(a){throw c.d.emit("permission-error",new m.$({operation:"write",path:"teams/".concat(t,"/employees/").concat(e,"/dailyProduction"),requestResourceData:"Batched initial production entries"})),a}},[a]);(0,r.useEffect)(()=>{if(!a)return;k(!0);let e=(0,n.P)((0,n.rJ)(a,"teams")),t=(0,n.aQ)(e,async e=>{let t=e.docs.map(e=>({id:e.id,...e.data()}));if(e.empty){let e=await (0,u.dC)((0,n.rJ)(a,"teams"));if(e.empty){let e=(0,n.wP)(a);for(let t of p){let s=(0,n.H9)((0,n.rJ)(a,"teams"));e.set(s,t);let r=x[t.name]||[],o=(0,n.rJ)(a,"teams/".concat(s.id,"/productionItems"));r.forEach(t=>{let a=(0,n.H9)(o);e.set(a,{...t,teamId:s.id})})}await e.commit().catch(e=>{c.d.emit("permission-error",new m.$({operation:"write",path:"teams",requestResourceData:"Initial teams and items batch write"}))})}else y(e.docs.map(e=>({id:e.id,...e.data()})));k(!1)}else y(t),k(!1)},e=>{h(e,"teams"),k(!1)});return()=>{t()}},[a]),(0,r.useEffect)(()=>{if(!a||0===g.length){v([]),j([]),I([]);return}let e=[];return k(!0),g.forEach(t=>{let s=(0,n.P)((0,n.rJ)(a,"teams/".concat(t.id,"/productionItems"))),r=(0,n.aQ)(s,e=>{let a=e.docs.map(e=>({id:e.id,...e.data()}));j(e=>[...e.filter(e=>e.teamId!==t.id),...a])},e=>h(e,"teams/".concat(t.id,"/productionItems")));e.push(r);let o=(0,n.P)((0,n.rJ)(a,"teams/".concat(t.id,"/employees"))),i=(0,n.aQ)(o,s=>{let r=s.docs.map(e=>({id:e.id,...e.data()}));v(e=>Array.from(new Map([...e.filter(e=>e.teamId!==t.id),...r].map(e=>[e.id,e])).values())),s.docChanges().forEach(s=>{let r=s.doc.id,o=(0,n.P)((0,n.rJ)(a,"teams/".concat(t.id,"/employees/").concat(r,"/dailyProduction"))),i=(0,n.aQ)(o,e=>{let t=e.docs.map(e=>({id:e.id,...e.data()}));I(e=>Array.from(new Map([...e.filter(e=>e.employeeId!==r),...t].map(e=>[e.id,e])).values()))},e=>h(e,"teams/".concat(t.id,"/employees/").concat(r,"/dailyProduction")));e.push(i),"removed"===s.type&&I(e=>e.filter(e=>e.employeeId!==r))})},e=>h(e,"teams/".concat(t.id,"/employees")));e.push(i)}),k(!1),()=>e.forEach(e=>e())},[a,g]);let F=async e=>{if(!a)return;let t=(0,n.rJ)(a,"teams/".concat(e.teamId,"/employees"));try{let a=w.filter(t=>t.teamId===e.teamId),s=await (0,n.gS)(t,e).catch(a=>{throw c.d.emit("permission-error",new m.$({operation:"create",path:t.path,requestResourceData:e})),a});await O(s.id,e.teamId,a)}catch(e){e instanceof m.$||console.error("Error adding employee:",e)}},J=async(e,t)=>{if(!a)return;let s=(0,n.H9)(a,"teams/".concat(t,"/employees"),e);try{let r=(0,n.P)((0,n.rJ)(s,"dailyProduction")),o=await (0,n.GG)(r).catch(a=>{throw h(a,"teams/".concat(t,"/employees/").concat(e,"/dailyProduction")),a}),i=(0,n.wP)(a);o.forEach(e=>i.delete(e.ref)),await i.commit(),await (0,n.kd)(s).catch(e=>{throw c.d.emit("permission-error",new m.$({path:s.path,operation:"delete"})),e}),v(t=>t.filter(t=>t.id!==e)),I(t=>t.filter(t=>t.employeeId!==e))}catch(e){e instanceof m.$||console.error("Error deleting employee and their production:",e)}};return(0,s.jsx)(f.Provider,{value:{teams:g,employees:b,items:w,production:N,loading:C,addEmployee:F,deleteEmployee:J,localRates:E,localProduction:R,hasChanges:P,handleRateChange:(e,t)=>{D(a=>({...a,[e]:parseFloat(t)||0})),z(!0)},handleProductionChange:(e,t,a,s)=>{let r=parseInt(s,10),n=isNaN(r)?0:r,o=new Date((0,i.k)(new Date,{weekStartsOn:1}));o.setDate(o.getDate()+a);let d=(0,l.x)(o,{representation:"date"}),c=Object.values(R).find(a=>a.employeeId===e&&a.productionItemId===t&&a.date===d);if(c)S(e=>({...e,[c.id]:{...c,quantity:""===s?0:n}}));else{let a="new-".concat(e,"-").concat(t,"-").concat(d),s={id:a,employeeId:e,productionItemId:t,date:d,quantity:n};S(e=>({...e,[a]:s}))}z(!0)},saveAllChanges:A,resetProduction:_},children:t})},y=()=>{let e=(0,r.useContext)(f);if(void 0===e)throw Error("useData must be used within a DataProvider");return e};var b=a(66634),v=a(74466),w=a(59434);let j=(0,v.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),N=r.forwardRef((e,t)=>{let{className:a,variant:r,size:n,asChild:o=!1,...i}=e,l=o?b.DX:"button";return(0,s.jsx)(l,{className:(0,w.cn)(j({variant:r,size:n,className:a})),ref:t,...i})});N.displayName="Button";var I=a(17104);function C(e){let{onLoginClick:t}=e;return(0,s.jsx)("header",{className:"bg-white shadow-md",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8 flex justify-between items-center",children:[(0,s.jsx)("div",{className:"w-1/4"}),(0,s.jsx)("h1",{className:"text-4xl font-bold text-center text-gray-900 w-1/2",children:"GENERADOR DE RECIBOS DE PAGO"}),(0,s.jsx)("div",{className:"w-1/4 flex justify-end",children:(0,s.jsxs)(N,{onClick:t,variant:"outline",className:"flex items-center gap-2",children:[(0,s.jsx)(I.A,{size:18}),(0,s.jsx)("span",{children:"Entrar"})]})})]})})}var k=a(18880);let E=k.bL,D=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(k.B8,{ref:t,className:(0,w.cn)("inline-flex items-center justify-center rounded-none bg-transparent p-0 border-b border-gray-200",a),...r})});D.displayName=k.B8.displayName;let R=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(k.l9,{ref:t,className:(0,w.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-none px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:shadow-sm border-b-4 border-transparent text-gray-500 hover:text-gray-800 hover:border-gray-300",a),...r})});R.displayName=k.l9.displayName;let S=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(k.UC,{ref:t,className:(0,w.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});S.displayName=k.UC.displayName;let P=r.forwardRef((e,t)=>{let{className:a,type:r,...n}=e;return(0,s.jsx)("input",{type:r,className:(0,w.cn)("flex h-auto w-full rounded-lg border border-gray-300 bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 shadow-sm md:text-sm",a),ref:t,...n})});P.displayName="Input";var z=a(62278);let _=z.bL,A=z.l9,O=z.ZL,F=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(z.hJ,{className:(0,w.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r,ref:t})});F.displayName=z.hJ.displayName;let J=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsxs)(O,{children:[(0,s.jsx)(F,{}),(0,s.jsx)(z.UC,{ref:t,className:(0,w.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r})]})});J.displayName=z.UC.displayName;let q=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,w.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};q.displayName="AlertDialogHeader";let H=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,w.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};H.displayName="AlertDialogFooter";let L=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(z.hE,{ref:t,className:(0,w.cn)("text-lg font-semibold",a),...r})});L.displayName=z.hE.displayName;let T=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(z.VY,{ref:t,className:(0,w.cn)("text-sm text-muted-foreground",a),...r})});T.displayName=z.VY.displayName;let $=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(z.rc,{ref:t,className:(0,w.cn)(j(),a),...r})});$.displayName=z.rc.displayName;let B=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(z.ZD,{ref:t,className:(0,w.cn)(j({variant:"outline"}),"mt-2 sm:mt-0",a),...r})});function G(e){let{team:t,isAuthenticated:a}=e,{employees:n,items:o,localProduction:d,localRates:c,addEmployee:m,deleteEmployee:u,handleRateChange:f,handleProductionChange:p}=y(),[x,h]=(0,r.useState)(""),g=n.filter(e=>e.teamId===t.id),b=o.filter(e=>e.teamId===t.id),v=async()=>{x.trim()&&(await m({name:x,teamId:t.id}),h(""))},w=["Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"];return(0,s.jsxs)("div",{children:[a&&(0,s.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-lg mb-8",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-4 border-b pb-3",children:t.name}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"md:col-span-3",children:[(0,s.jsx)("label",{htmlFor:"employeeName-".concat(t.id),className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del nuevo empleado"}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)(P,{id:"employeeName-".concat(t.id),value:x,onChange:e=>h(e.target.value),placeholder:"Agregar al grupo de ".concat(t.name.toLowerCase()),className:"flex-grow w-full p-3",onKeyDown:e=>"Enter"===e.key&&v()}),(0,s.jsx)(N,{onClick:v,className:"bg-blue-600 text-white font-semibold px-6 py-3 h-auto rounded-lg shadow-md hover:bg-blue-700",children:"Agregar"})]})]}),(0,s.jsxs)("div",{className:"md:col-span-3 mt-4 pt-4 border-t",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Corazones"===t.name?"Pago x pieza":"Pago por kg"}),(0,s.jsx)("div",{className:"grid grid-cols-2 ".concat("Corazones"===t.name?"sm:grid-cols-4":"sm:grid-cols-3"," gap-4"),children:b.map(e=>{var t;return(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:e.name}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center text-gray-500",children:"$"}),(0,s.jsx)(P,{type:"number",min:"0",step:"0.01",value:null!=(t=c[e.id])?t:"",onChange:t=>f(e.id,t.currentTarget.value),className:"w-full pl-7 p-3",disabled:!a})]})]},e.id)})})]})]})]}),(0,s.jsx)("div",{className:"space-y-8",children:g.length>0?g.map(e=>(0,s.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-lg",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4 border-b pb-4",children:[(0,s.jsx)("h3",{className:"text-2xl font-bold text-gray-800",children:e.name}),a&&(0,s.jsxs)(_,{children:[(0,s.jsx)(A,{asChild:!0,children:(0,s.jsx)(N,{variant:"ghost",className:"text-red-500 hover:text-red-700 font-semibold py-2 px-4 rounded-lg hover:bg-red-100 transition",children:"Eliminar"})}),(0,s.jsxs)(J,{children:[(0,s.jsxs)(q,{children:[(0,s.jsx)(L,{children:"Estas seguro?"}),(0,s.jsxs)(T,{children:["Esta accion no se puede cancelar, esta seguro de eliminar a ",e.name,"?"]})]}),(0,s.jsxs)(H,{children:[(0,s.jsx)(B,{children:"Cancel"}),(0,s.jsx)($,{onClick:()=>u(e.id,t.id),className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold mb-2 text-gray-600",children:"Producci\xf3n Semanal"}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-center",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b-2",children:[(0,s.jsx)("th",{className:"py-2 px-3 text-left font-medium text-gray-500 text-sm",children:"Tipo"}),w.map(e=>(0,s.jsx)("th",{className:"py-2 px-1 font-medium text-gray-500 text-sm",children:e.substring(0,3)},e))]})}),(0,s.jsx)("tbody",{children:b.map(t=>(0,s.jsxs)("tr",{className:"border-b",children:[(0,s.jsx)("td",{className:"font-semibold py-2 px-3 text-gray-700",children:t.name}),w.map((a,r)=>{let n=new Date((0,i.k)(new Date,{weekStartsOn:1}));n.setDate(n.getDate()+r);let o=(0,l.x)(n,{representation:"date"}),c=Object.values(d).find(a=>a.employeeId===e.id&&a.productionItemId===t.id&&a.date===o),m=null==c?void 0:c.quantity;return(0,s.jsx)("td",{className:"p-1",children:(0,s.jsx)(P,{type:"text",value:0===m?"":null!=m?m:"",onChange:a=>p(e.id,t.id,r,a.currentTarget.value),className:"w-20 p-2"})},r)})]},t.id))})]})})]})]},e.id)):(0,s.jsx)("div",{className:"text-center py-12 bg-white rounded-2xl shadow-lg",children:(0,s.jsx)("h3",{className:"text-xl font-medium text-gray-500",children:"No hay personal registrado"})})})]})}B.displayName=z.ZD.displayName;var M=a(41297),U=a(51920),V=a(965),Y=a(73158),Z=a(43900);function Q(e){let{className:t,classNames:a,showOutsideDays:r=!0,...n}=e;return(0,s.jsx)(Z.hv,{showOutsideDays:r,className:(0,w.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,w.cn)(j({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,w.cn)(j({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{className:t,...a}=e;return(0,s.jsx)(V.A,{className:(0,w.cn)("h-4 w-4",t),...a})},IconRight:e=>{let{className:t,...a}=e;return(0,s.jsx)(Y.A,{className:(0,w.cn)("h-4 w-4",t),...a})}},...n})}Q.displayName="Calendar";var K=a(46277);let X=K.bL,W=K.l9,ee=r.forwardRef((e,t)=>{let{className:a,align:r="center",sideOffset:n=4,...o}=e;return(0,s.jsx)(K.ZL,{children:(0,s.jsx)(K.UC,{ref:t,align:r,sideOffset:n,className:(0,w.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...o})})});function et(e){let{date:t,setDate:a,className:r}=e;return(0,s.jsxs)(X,{children:[(0,s.jsx)(W,{asChild:!0,children:(0,s.jsxs)(N,{variant:"outline",className:(0,w.cn)("w-full justify-start text-left font-normal p-3 h-auto border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500",!t&&"text-muted-foreground",r),children:[(0,s.jsx)(U.A,{className:"mr-2 h-4 w-4"}),t?(0,M.GP)(t,"PPP"):(0,s.jsx)("span",{children:"Pick a date"})]})}),(0,s.jsx)(ee,{className:"w-auto p-0",children:(0,s.jsx)(Q,{mode:"single",selected:t,onSelect:a,initialFocus:!0})})]})}ee.displayName=K.UC.displayName;var ea=a(26597);a(86087);var es=a(87481),er=a(50172);function en(){return(0,s.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-background",children:(0,s.jsx)(er.A,{className:"h-16 w-16 animate-spin text-primary"})})}var eo=a(45821),ei=a(25318);let el=eo.bL;eo.l9;let ed=eo.ZL;eo.bm;let ec=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eo.hJ,{ref:t,className:(0,w.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});ec.displayName=eo.hJ.displayName;let em=r.forwardRef((e,t)=>{let{className:a,children:r,hideCloseButton:n,...o}=e;return(0,s.jsxs)(ed,{children:[(0,s.jsx)(ec,{}),(0,s.jsxs)(eo.UC,{ref:t,className:(0,w.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...o,children:[r,!n&&(0,s.jsxs)(eo.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(ei.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});em.displayName=eo.UC.displayName;let eu=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,w.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};eu.displayName="DialogHeader";let ef=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,w.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};ef.displayName="DialogFooter";let ep=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eo.hE,{ref:t,className:(0,w.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});ep.displayName=eo.hE.displayName;let ex=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eo.VY,{ref:t,className:(0,w.cn)("text-sm text-muted-foreground",a),...r})});function eh(){let[e,t]=(0,r.useState)(new Date),{employees:a,items:n,production:o,teams:d,loading:c,hasChanges:m,saveAllChanges:u,resetProduction:f}=y(),{toast:p}=(0,es.dj)(),[x,h]=(0,r.useState)(!1),[g,b]=(0,r.useState)(""),[v,w]=(0,r.useState)(!1),j=()=>{"password"===g?(h(!0),w(!1),b(""),p({title:"Exito",description:"Contrase\xf1a correcta"})):p({title:"Error",description:"Contrase\xf1a incorrecta",variant:"destructive"})},I=async()=>{try{await u(),p({title:"Exito",description:"Cambios guardados."})}catch(e){p({title:"Error",description:"No se pudieron guardar los cambios.",variant:"destructive"})}};return c?(0,s.jsx)(en,{}):(0,s.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-100 text-gray-800",children:[(0,s.jsx)(C,{onLoginClick:()=>w(!0)}),(0,s.jsxs)("main",{className:"flex-1 max-w-7xl mx-auto p-4 sm:p-6 lg:p-8 w-full",children:[(0,s.jsx)(el,{open:v,onOpenChange:w,children:(0,s.jsxs)(em,{className:"sm:max-w-[425px]",children:[(0,s.jsxs)(eu,{children:[(0,s.jsx)(ep,{children:"Contrase\xf1a"}),(0,s.jsx)(ex,{children:"Ingrese contrase\xf1a para acceder e imprimir recibos."})]}),(0,s.jsx)("div",{className:"grid gap-4 py-4",children:(0,s.jsx)(P,{id:"password",type:"password",value:g,onChange:e=>b(e.target.value),placeholder:"Ingrese contrase\xf1a",className:"w-full p-3",onKeyDown:e=>"Enter"===e.key&&j()})}),(0,s.jsx)(ef,{children:(0,s.jsx)(N,{onClick:j,className:"w-full bg-blue-600 text-white font-bold py-3 rounded-lg shadow-lg hover:bg-blue-700 text-lg h-auto",children:"Entrar"})})]})}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-lg mb-8",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-center",children:"Fecha de pago"}),(0,s.jsx)("div",{className:"max-w-xs mx-auto",children:(0,s.jsx)(et,{date:e,setDate:t})})]}),(0,s.jsxs)(E,{defaultValue:"Corazones",className:"w-full",children:[(0,s.jsx)(D,{className:"grid w-full grid-cols-2 h-auto mb-8",children:d.map(e=>(0,s.jsx)(R,{value:e.name,className:"text-lg font-semibold py-3 px-8 transition-colors duration-300 data-[state=active]:border-blue-500 data-[state=active]:bg-blue-500 data-[state=active]:text-white",children:e.name},e.id))}),d.map(e=>(0,s.jsx)(S,{value:e.name,children:(0,s.jsx)(G,{team:e,isAuthenticated:x})},e.id))]}),(0,s.jsxs)("footer",{className:"mt-12 text-center flex justify-center items-center gap-4",children:[(0,s.jsx)(N,{onClick:f,variant:"outline",className:"bg-white text-gray-700 font-bold px-10 py-4 rounded-lg shadow-xl hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 transition-transform transform hover:scale-105 text-lg h-auto",children:"REINICIAR"}),m&&(0,s.jsx)(N,{onClick:I,className:"bg-yellow-500 text-white font-bold px-10 py-4 rounded-lg shadow-xl hover:bg-yellow-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 transition-transform transform hover:scale-105 text-lg h-auto",children:"GUARDAR CAMBIOS"}),x&&(0,s.jsx)(N,{onClick:()=>{if(!x)return void w(!0);if(m)return void p({title:"Cambios sin guardar",description:"Por favor guarde sus cambios antes de generar el PDF.",variant:"destructive"});if(!e)return void p({title:"Error",description:"Por favor selecione una fecha",variant:"destructive"});if(0===a.length)return void p({title:"Error",description:"Agrega al menos un empleado para crear el reporte",variant:"destructive"});let t=new ea.jsPDF,s=new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().split("T")[0],r=15,c=t.internal.pageSize.getHeight(),u=["Lunes","Martes","Miercoles","Jueves","Viernes","S\xe1bado"];d.forEach(e=>{let d=a.filter(t=>t.teamId===e.id),m=n.filter(t=>t.teamId===e.id);d.forEach(a=>{let n=35+6*m.length;r+n>c-20&&(t.addPage(),r=15),t.setFontSize(16),t.setFont("helvetica","bold"),t.text("Recibo de pago",14,r),t.setFontSize(10),t.setFont("helvetica","normal"),t.text("Grupo: ".concat(e.name),200,r,{align:"right"}),r+=7,t.setFontSize(12),t.text("".concat(a.name),14,r),t.text("Fecha: ".concat(s),200,r,{align:"right"}),r+=2;let d=o.filter(e=>e.employeeId===a.id),f=0,p=(0,i.k)(new Date,{weekStartsOn:1}),x=m.map(e=>{let t=d.filter(t=>t.productionItemId===e.id),a=u.map((e,a)=>{let s=new Date(p);s.setDate(s.getDate()+a);let r=(0,l.x)(s,{representation:"date"}),n=t.find(e=>e.date===r);return n?n.quantity:0}),s=a.reduce((e,t)=>e+t,0),r=e.payRate,n=s*r;return f+=n,[e.name,...a,s,"$".concat(r.toFixed(2)),"$".concat(n.toFixed(2))]});t.autoTable({head:[["Tipo",...u,"Cantidad","Corazones"===e.name?"Pago x pza":"Pago x kg","Subtotal"]],body:x,startY:r,theme:"grid",headStyles:{fillColor:[41,128,185],textColor:255},styles:{fontSize:8,cellPadding:1.5},columnStyles:{0:{fontStyle:"bold"},7:{halign:"right"},8:{halign:"right"},9:{halign:"right",fontStyle:"bold"}}}),r=t.lastAutoTable.finalY,t.setFontSize(14),t.setFont("helvetica","bold"),t.text("Pago Total de la Semana: $".concat(f.toFixed(2)),14,r+12),r+=25})}),t.save("recibos_".concat(s.replace(/-/g,"_"),".pdf"))},className:"bg-green-600 text-white font-bold px-10 py-4 rounded-lg shadow-xl hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-transform transform hover:scale-105 text-lg h-auto",children:"GENERAR RECIBOS"})]})]})]})}function eg(){return(0,s.jsx)(g,{children:(0,s.jsx)(eh,{})})}ex.displayName=eo.VY.displayName},32751:(e,t,a)=>{Promise.resolve().then(a.bind(a,25684))}},e=>{var t=t=>e(e.s=t);e.O(0,[992,644,930,370,606,794,441,684,358],()=>t(32751)),_N_E=e.O()}]);